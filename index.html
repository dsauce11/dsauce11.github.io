<!DOCTYPE html>

<script src="https://d3js.org/d3.v6.min.js"></script>

<head>
    <title> English Premier League Data Viz </title>
    <style>
        h1 {text-align: center;}
        p {text-align: center;}
    </style>
</head>

<body onload = "TitlePage()">

<h1>Premier Leage Data Visualization</h1>
<p>By:Daniel Saucedo</p>

<img src="Arsenal-FC-icon.png" alt="Arsenal" width="232" height="256">
<img src="Chelsea-fc-icon.png" alt="Chelsea" width="232" height="256">
<img src="liverpool-icon.png" alt="liverpool" width="232" height="256">
<img src="Manchester-United-icon.png" alt="ManU" width="232" height="256">
<img src="manchester-city-icon.png" alt="ManCity" width="232" height="256">
<img src="Spurs-fc-icon.png" alt="Spurs" width="232" height="256">

<p id = p1></p>
<p id = p2></p>
<p id = p3></p>
<p id = p4></p>

<select id="selectButton"></select>
<div id='SelectDrop'></div>
<button id="HomePage" onclick = "TitlePage()">Home Page</button>
<button id="graph1" onclick = "graph_one()">Graph 1</button>
<button id="graph2" onclick = "graph_two()">Graph 2</button>
<button id="graph3" onclick = "graph_three()">Graph 3</button>


</body>
<script>

    //Here is the portion that will contain D3.js Code
    function TitlePage() {
        const explantion = "The English Premier League is one of the most popular Football (or soccer however you may call it) in the world." +
                            " As the new 2021/2022 season is about to start in August 13, I wonder how the historic top 6 clubs have performed thoughout the " + 
                            "past 4 years. From the 2017/18 to the 2020/21 Season. These top 6 clubs being Arsenal, Chelsea, Liverpool, Manchester United, Manchester City and Spurs." + 
                            " While also delving into past seasons player performances and see if any players have been improving or decreasing in quality."
        d3.select('body').select('#p1').text(explantion);
        d3.select('body').select('#p2').text("Below should be the buttons to navigate to the graphs I have presented.");
        d3.select("svg").remove();
        d3.select("#selectButton").selectAll('option').remove();  

    }

    function graph_one() {
        d3.select("svg").remove();
        d3.select("#selectButton").selectAll('option').remove();
        d3.select('body').select('#p1').text("In this page will contain the Top 6 Clubs total points in the past 4 Premier League Seasons. Where we will be able to tell how these top 6 clubs performances have been in the  past 4 seasons. ");
        d3.select('body').select('#p2').text("Feel free to check each club's perfomance from the past 4 seasons. ");
        d3.select('body').select('#p3').text("The graph below:");
        
        //Actual D3.js graph time
        const svg = d3.select("#SelectDrop").append("svg").attr("width", 900).attr("height", 800).append("g").attr("transform",'translate(100, 100)');
        svg.append('text').attr('id', 'labels1').attr('x', 220).attr('y', 500).text("Season") 
        svg.append('text').attr('id', 'labels2').attr('x', -100).attr('y', 200).text("Total Points") 

        //Setting up Data and Graph
        d3.csv("https://raw.githubusercontent.com/dsauce11/dsauce11.github.io/main/SeasonData.csv").then(function(SeasonsEPL) {
            const teams = ['Arsenal', 'Chelsea', 'Liverpool', 'Manchester City', 'Manchester Utd', 'Tottenham'];

            d3.select("#selectButton").selectAll('myOptions').data(teams).enter().append('Option')
                .text(function (d) { return d; })
                .attr("value", function (d) { return d; })

            //const myColor = d3.scaleOrdinal().domain(teams).range(d3.schemeSet3);
            
            //X-Axis Creation
            const x = d3.scaleBand().domain(["17/18","18/19","19/20","20/21"]).range([0,500]).padding(01);;
            svg.append('g').attr("transform",`translate(0, ${500})`).call(d3.axisBottom(x));

            //Y-axis Creation
            const y = d3.scaleLinear().domain([40,110]).range([500, 0 ]);
            svg.append("g").attr("transform","translate(0,0)").call(d3.axisLeft(y));

            //Line Creation
            const line = svg.append('g').append("path").datum(SeasonsEPL.filter(function(d){ return (d.Squad == "Arsenal")}))
                .attr("d", d3.line()
                .x(d => x(d.Season))
                .y(d => y(d.Pts) )).attr("stroke", "red").style("stroke-width", 4).style("fill", "none")

            // Create mouse Effect
            const tooltip = d3.select('#SelectDrop').append("div").style("opacity", 0).attr("class","tooltip").style("position", "absolute").style("background-color", "white").style("border", "solid")
                .style("border-width", "1px").style("border-radius", "1px").style("padding", "1px");
            
            const mouseover = function(d) {
                tooltip.style("opacity", 1).html(`Total amount of Points: ${d.Pts}`).style("left", (event.pageX) + 90  + "px") .style("top", (event.pageY) + "px")
            }
            const mousemove = function(event,d) {
                tooltip.html(`Total amount of Points: ${d.Pts}`).style("left", (event.pageX) + 90  + "px") .style("top", (event.pageY) + "px")
            }
            const mouseleave = function(event,d) {
                tooltip.style("opacity",0)
            }
            // Actual Dots Creation
            const dot = svg.append("g").selectAll("circle").data(SeasonsEPL.filter(function(d){ return (d.Squad == "Arsenal")}))
                .join("circle")
                    .attr("cx", d => x(d.Season))
                    .attr("cy", d => y(d.Pts))
                    .attr("r", 7)
                    .attr("fill", "black").on("mouseover",mouseover).on("mousemove",mousemove).on("mouseleave",mouseleave)

            

            
            function update(SelectedGroup) {
                const dataFilter = SeasonsEPL.filter(function (d) { return (d.Squad == SelectedGroup) })
                line.datum(dataFilter).transition().duration(1000).attr("d", d3.line().x(d => x(d.Season)).y(d=>y(d.Pts)))
                dot.data(dataFilter).transition().duration(1000).attr("cx", d => x(d.Season)).attr("cy", d => y(d.Pts)).on("mouseover",mouseover).on("mousemove",mousemove).on("mouseleave",mouseleave)
            }
            d3.select("#selectButton").on("change", function(d) {
                let selectedOption = d3.select(this).property("value")
                update(selectedOption)
            })
        });

    }
    function graph_two() {
        d3.select("svg").remove(); //Makes sure to remove what's previously shown and show new graph SOURCE: https://stackoverflow.com/questions/10784018/how-can-i-remove-or-replace-svg-content
        d3.select("#selectButton").selectAll('option').remove();
        d3.select('body').select('#p1').text("For each player, there is a statistic measure that calulates the probability a shot they take will become a goal. That is called xG (Expected Goals). " +
                                        "In this graph we will compare each season a players xG and their actually tally of goals. Eacb player played a Minimum of one minute the entire season.");
        d3.select('body').select('#p2').text("Expected Goals vs Goals:");
        d3.select('body').select('#p3').text("The graph below:");

        //Actual D3.js graph time
        const svg = d3.select("#SelectDrop").append("svg").attr("width", 900).attr("height", 800).append("g").attr("transform",'translate(100, 100)');

        //Setting up Data and Graph
        d3.csv("https://raw.githubusercontent.com/dsauce11/dsauce11.github.io/main/PlayersData.csv").then(function(PlayData) {
            const PlayersName = ["Bernd Leno", "Bukayo Saka","Granit Xhaka","Rob Holding","Pierre-Emerick Aubameyang","Kieran Tierney","Héctor Bellerín","Gabriel Dos Santos","Alexandre Lacazette","Thomas Partey"
                                ,"Emile Smith-Rowe","Dani Ceballos","Mohamed Elneny","David Luiz","Nicolas Pépé","Willian","Pablo Marí","Martin Ødegaard","Calum Chambers","Cédric Soares","Martinelli","Ainsley Maitland-Niles"
                                ,"Eddie Nketiah","Mathew Ryan","Joe Willock","Sead Kolašinac","Reiss Nelson","Shkodran Mustafi","Rúnar Alex Rúnarsson","Mattéo Guendouzi","Sokratis Papastathopoulos","Mesut Özil","Lucas Torreira"
                                ,"Emiliano Martínez","Nacho Monreal","Alex Iwobi","Henrikh Mkhitaryan","Aaron Ramsey","Laurent Koscielny","Stephan Lichtsteiner","Petr Čech","Konstantinos Mavropanos","Carl Jenkinson","Danny Welbeck","Denis Suárez"
                                ,"Alexis Sánchez","Jack Wilshere","David Ospina","Per Mertesacker","Alex Oxlade-Chamberlain","Olivier Giroud","Francis Coquelin","Theo Walcott","César Azpilicueta","Thibaut Courtois","N'Golo Kanté","Marcos Alonso"
                                ,"Eden Hazard","Antonio Rüdiger","Cesc Fàbregas","Victor Moses","Tiemoué Bakayoko","Gary Cahill","Álvaro Morata","Andreas Christensen","Pedro","Davide Zappacosta","Danny Drinkwater","Michy Batshuayi","Emerson Palmieri"
                                ,"Willy Caballero","Ross Barkley","Jeremie Boga","Charly Musonda Jr.","Callum Hudson-Odoi","Ethan Ampadu","Jorginho","Kepa Arrizabalaga","Mateo Kovačić","Gonzalo Higuaín","Ruben Loftus-Cheek","Mason Mount","Kurt Zouma"
                                ,"Tammy Abraham","Christian Pulisic","Reece James","Fikayo Tomori","Billy Gilmour","Tariq Lamptey","Faustino Anjorin","Armando Broja","Edouard Mendy","Timo Werner","Ben Chilwell","Thiago Silva","Kai Havertz"
                                ,"Hakim Ziyech","Mohamed Salah","Roberto Firmino","Sadio Mané","Georginio Wijnaldum","Jordan Henderson","Dejan Lovren","Emre Can","Joël Matip","Andrew Robertson","Joe Gomez","Loris Karius","Simon Mignolet","Trent Alexander-Arnold"
                                ,"James Milner","Ragnar Klavan","Alberto Moreno","Virgil van Dijk","Philippe Coutinho","Dominic Solanke","Daniel Sturridge","Danny Ings","Nathaniel Clyne","Adam Lallana","Marko Grujić","Divock Origi","Ben Woodburn","Alisson","Fabinho","Naby Keïta","Xherdan Shaqiri"
                                ,"Rafael Camacho","Adrián","Neco Williams","Takumi Minamino","Curtis Jones","Harvey Elliot","Thiago Alcántara","Nathaniel Phillips","Diogo Jota","Ozan Kabak","Rhys Williams","Caoimhín Kelleher","Kostas Tsimikas","Ederson","Kevin De Bruyne","Nicolás Otamendi","Fernandinho"
                                ,"Kyle Walker","Raheem Sterling","David Silva","Leroy Sané","Sergio Agüero","Fabian Delph","Gabriel Jesus","Vincent Kompany","John Stones","Bernardo Silva","İlkay Gündoğan","Danilo","Aymeric Laporte","Oleksandr Zinchenko","Eliaquim Mangala","Benjamin Mendy","Claudio Bravo"
                                ,"Yaya Touré","Brahim Díaz","Phil Foden","Lukas Nmecha","Riyad Mahrez","Rodri","João Cancelo","Eric García","Angeliño","Thomas Doyle","Rúben Dias","Ferrán Torres","Nathan Aké","Scott Carson","Zack Steffen","Liam Delap","David de Gea","Nemanja Matić","Romelu Lukaku"
                                ,"Antonio Valencia","Chris Smalling","Ashley Young","Paul Pogba","Phil Jones","Juan Mata","Jesse Lingard","Anthony Martial","Marcus Rashford","Victor Lindelöf","Ander Herrera","Eric Bailly","Luke Shaw","Marcos Rojo","Scott McTominay","Marouane Fellaini","Matteo Darmian","Daley Blind"
                                ,"Michael Carrick","Zlatan Ibrahimović","Sergio Romero","Axel Tuanzebe","Fred","Diogo Dalot","Andreas Pereira","Mason Greenwood","Tahith Chong","Angel Gomes","James Garner","Harry Maguire","Aaron Wan-Bissaka","Daniel James","Bruno Fernandes","Brandon Williams","Timothy Fosu-Mensah"
                                ,"Odion Ighalo","Edinson Cavani","Dean Henderson","Alex Telles","Donny van de Beek","Amad Diallo","Anthony Elanga","Shola Shoretire","Hannibal Mejbri","William Thomas Fish","Christian Eriksen","Hugo Lloris","Jan Vertonghen","Harry Kane","Dele Alli","Eric Dier","Davinson Sánchez"
                                ,"Son Heung-min","Ben Davies","Kieran Trippier","Mousa Dembélé","Serge Aurier","Moussa Sissoko","Toby Alderweireld","Danny Rose","Harry Winks","Victor Wanyama","Érik Lamela","Lucas Moura","Kyle Walker-Peters","Fernando Llorente","Paulo Gazzaniga","Michel Vorm","Vincent Janssen"
                                ,"Georges-Kévin N'Koudou","Juan Foyth","Oliver Skipp","Luke Amos","Giovani Lo Celso","Tanguy Ndombele","Steven Bergwijn","Japhet Tanganga","Ryan Sessegnon","Gedson Fernandes","Troy Parrott","Pierre Højbjerg","Sergio Reguilón","Matt Doherty","Gareth Bale","Joe Rodon","Carlos Vinícius"
                                ,"Dane Scarlet"]
                d3.select("#selectButton").selectAll('myOptions').data(PlayersName).enter().append('Option')
                    .text(function (d) { return d; })
                    .attr("value", function (d) { return d; })


        });

        
    }
    function graph_three() {
        d3.select("svg").remove();
        d3.select("#selectButton").selectAll('option').remove();
        d3.select('body').select('#p1').text("Expected Assists vs Assists");
        d3.select('body').select('#p2').text("The graph below:");
        

        //Actual D3.js graph time
        const svg = d3.select("#SelectDrop").append("svg").attr("width", 900).attr("height", 800).append("g").attr("transform",'translate(100, 100)');

        //Setting up Data and Graph
        d3.csv("https://raw.githubusercontent.com/dsauce11/dsauce11.github.io/main/PlayersData.csv").then(function(PlayData) {
            const PlayersName = ["Bernd Leno", "Bukayo Saka","Granit Xhaka","Rob Holding","Pierre-Emerick Aubameyang","Kieran Tierney","Héctor Bellerín","Gabriel Dos Santos","Alexandre Lacazette","Thomas Partey"
                                ,"Emile Smith-Rowe","Dani Ceballos","Mohamed Elneny","David Luiz","Nicolas Pépé","Willian","Pablo Marí","Martin Ødegaard","Calum Chambers","Cédric Soares","Martinelli","Ainsley Maitland-Niles"
                                ,"Eddie Nketiah","Mathew Ryan","Joe Willock","Sead Kolašinac","Reiss Nelson","Shkodran Mustafi","Rúnar Alex Rúnarsson","Mattéo Guendouzi","Sokratis Papastathopoulos","Mesut Özil","Lucas Torreira"
                                ,"Emiliano Martínez","Nacho Monreal","Alex Iwobi","Henrikh Mkhitaryan","Aaron Ramsey","Laurent Koscielny","Stephan Lichtsteiner","Petr Čech","Konstantinos Mavropanos","Carl Jenkinson","Danny Welbeck","Denis Suárez"
                                ,"Alexis Sánchez","Jack Wilshere","David Ospina","Per Mertesacker","Alex Oxlade-Chamberlain","Olivier Giroud","Francis Coquelin","Theo Walcott","César Azpilicueta","Thibaut Courtois","N'Golo Kanté","Marcos Alonso"
                                ,"Eden Hazard","Antonio Rüdiger","Cesc Fàbregas","Victor Moses","Tiemoué Bakayoko","Gary Cahill","Álvaro Morata","Andreas Christensen","Pedro","Davide Zappacosta","Danny Drinkwater","Michy Batshuayi","Emerson Palmieri"
                                ,"Willy Caballero","Ross Barkley","Jeremie Boga","Charly Musonda Jr.","Callum Hudson-Odoi","Ethan Ampadu","Jorginho","Kepa Arrizabalaga","Mateo Kovačić","Gonzalo Higuaín","Ruben Loftus-Cheek","Mason Mount","Kurt Zouma"
                                ,"Tammy Abraham","Christian Pulisic","Reece James","Fikayo Tomori","Billy Gilmour","Tariq Lamptey","Faustino Anjorin","Armando Broja","Edouard Mendy","Timo Werner","Ben Chilwell","Thiago Silva","Kai Havertz"
                                ,"Hakim Ziyech","Mohamed Salah","Roberto Firmino","Sadio Mané","Georginio Wijnaldum","Jordan Henderson","Dejan Lovren","Emre Can","Joël Matip","Andrew Robertson","Joe Gomez","Loris Karius","Simon Mignolet","Trent Alexander-Arnold"
                                ,"James Milner","Ragnar Klavan","Alberto Moreno","Virgil van Dijk","Philippe Coutinho","Dominic Solanke","Daniel Sturridge","Danny Ings","Nathaniel Clyne","Adam Lallana","Marko Grujić","Divock Origi","Ben Woodburn","Alisson","Fabinho","Naby Keïta","Xherdan Shaqiri"
                                ,"Rafael Camacho","Adrián","Neco Williams","Takumi Minamino","Curtis Jones","Harvey Elliot","Thiago Alcántara","Nathaniel Phillips","Diogo Jota","Ozan Kabak","Rhys Williams","Caoimhín Kelleher","Kostas Tsimikas","Ederson","Kevin De Bruyne","Nicolás Otamendi","Fernandinho"
                                ,"Kyle Walker","Raheem Sterling","David Silva","Leroy Sané","Sergio Agüero","Fabian Delph","Gabriel Jesus","Vincent Kompany","John Stones","Bernardo Silva","İlkay Gündoğan","Danilo","Aymeric Laporte","Oleksandr Zinchenko","Eliaquim Mangala","Benjamin Mendy","Claudio Bravo"
                                ,"Yaya Touré","Brahim Díaz","Phil Foden","Lukas Nmecha","Riyad Mahrez","Rodri","João Cancelo","Eric García","Angeliño","Thomas Doyle","Rúben Dias","Ferrán Torres","Nathan Aké","Scott Carson","Zack Steffen","Liam Delap","David de Gea","Nemanja Matić","Romelu Lukaku"
                                ,"Antonio Valencia","Chris Smalling","Ashley Young","Paul Pogba","Phil Jones","Juan Mata","Jesse Lingard","Anthony Martial","Marcus Rashford","Victor Lindelöf","Ander Herrera","Eric Bailly","Luke Shaw","Marcos Rojo","Scott McTominay","Marouane Fellaini","Matteo Darmian","Daley Blind"
                                ,"Michael Carrick","Zlatan Ibrahimović","Sergio Romero","Axel Tuanzebe","Fred","Diogo Dalot","Andreas Pereira","Mason Greenwood","Tahith Chong","Angel Gomes","James Garner","Harry Maguire","Aaron Wan-Bissaka","Daniel James","Bruno Fernandes","Brandon Williams","Timothy Fosu-Mensah"
                                ,"Odion Ighalo","Edinson Cavani","Dean Henderson","Alex Telles","Donny van de Beek","Amad Diallo","Anthony Elanga","Shola Shoretire","Hannibal Mejbri","William Thomas Fish","Christian Eriksen","Hugo Lloris","Jan Vertonghen","Harry Kane","Dele Alli","Eric Dier","Davinson Sánchez"
                                ,"Son Heung-min","Ben Davies","Kieran Trippier","Mousa Dembélé","Serge Aurier","Moussa Sissoko","Toby Alderweireld","Danny Rose","Harry Winks","Victor Wanyama","Érik Lamela","Lucas Moura","Kyle Walker-Peters","Fernando Llorente","Paulo Gazzaniga","Michel Vorm","Vincent Janssen"
                                ,"Georges-Kévin N'Koudou","Juan Foyth","Oliver Skipp","Luke Amos","Giovani Lo Celso","Tanguy Ndombele","Steven Bergwijn","Japhet Tanganga","Ryan Sessegnon","Gedson Fernandes","Troy Parrott","Pierre Højbjerg","Sergio Reguilón","Matt Doherty","Gareth Bale","Joe Rodon","Carlos Vinícius"
                                ,"Dane Scarlet"]
            d3.select("#selectButton").selectAll('myOptions').data(PlayersName).enter().append('Option')
                    .text(function (d) { return d; })
                    .attr("value", function (d) { return d; })


        });


        
    }
    
    

</script>
