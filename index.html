<!DOCTYPE html>

<script src="https://d3js.org/d3.v6.min.js"></script>

<head>
    <title> English Premier League Data Viz </title>
    <style>
        h1 {text-align: center;}
        p {text-align: center;}
    </style>
</head>

<body onload = "TitlePage()">

<h1>Premier Leage Data Visualization</h1>
<p>By:Daniel Saucedo</p>

<img src="Arsenal-FC-icon.png" alt="Arsenal" width="232" height="256">
<img src="Chelsea-fc-icon.png" alt="Chelsea" width="232" height="256">
<img src="liverpool-icon.png" alt="liverpool" width="232" height="256">
<img src="Manchester-United-icon.png" alt="ManU" width="232" height="256">
<img src="manchester-city-icon.png" alt="ManCity" width="232" height="256">
<img src="Spurs-fc-icon.png" alt="Spurs" width="232" height="256">

<p id = p1></p>
<p id = p2></p>
<p id = p3></p>
<p id = p4></p>

<select id="selectButton"></select>
<div id='SelectDrop'></div>
<button id="HomePage" onclick = "TitlePage()">Home Page</button>
<button id="graph1" onclick = "graph_one()">Graph 1</button>
<button id="graph2" onclick = "graph_two()">Graph 2</button>
<button id="graph3" onclick = "graph_three()">Graph 3</button>


</body>
<script>

    //Here is the portion that will contain D3.js Code
    function TitlePage() {
        const explantion = "The English Premier League is one of the most popular Football (or soccer however you may call it) in the world." +
                            " As the new 2021/2022 season is about to start in August 13, I wonder how the historic top 6 clubs have performed thoughout the " + 
                            "past 4 years. From the 2017/18 to the 2020/21 Season. These top 6 clubs being Arsenal, Chelsea, Liverpool, Manchester United, Manchester City and Spurs." + 
                            " While also delving into past seasons player performances and see if any players have been improving or decreasing in quality."
        d3.select('body').select('#p1').text(explantion);
        d3.select('body').select('#p2').text("Below should be the buttons to navigate to the graphs I have presented.");
        d3.select("svg").remove();
        d3.select("#selectButton").selectAll('option').remove();  

    }

    function graph_one() {
        d3.select('body').select('#p1').text("In this page will contain the Top 6 Clubs total points in the past 4 Premier League Seasons");
        d3.select('body').select('#p2').text("The graph below:");

        //Actual D3.js graph time
        const svg = d3.select("#SelectDrop").append("svg").attr("width", 900).attr("height", 800).append("g").attr("transform",'translate(100, 100)');

        //Setting up Data and Graph
        d3.csv("https://raw.githubusercontent.com/dsauce11/dsauce11.github.io/main/SeasonData.csv").then(function(SeasonsEPL) {
            const teams = ['Arsenal', 'Chelsea', 'Liverpool', 'Manchester City', 'Manchester Utd', 'Tottenham'];

            d3.select("#selectButton").selectAll('myOptions').data(teams).enter().append('Option')
                .text(function (d) { return d; })
                .attr("value", function (d) { return d; })

            const myColor = d3.scaleOrdinal().domain(teams).range(d3.schemeSet3);
            
            //X-Axis Creation
            //const x = d3.scaleBand().domain(["17/18","18/19","19/20","20/21"]).range([0,800]);
            //x = d3.scaleBand().domain(["17/18","18/19","19/20","20/21"]).range([0,800]);
            x = d3.scaleBand().domain(d3.extent(SeasonsEPL,function(d){return (d.Season)})).range([0,800]);
            svg.append('g').attr("transform",`translate(0, ${500})`).call(d3.axisBottom(x));

            //Y-axis Creation
            //const y = d3.scaleLinear().domain([40,110]).range([500, 0 ]);
            y = d3.scaleLinear().domain([40,110]).range([500, 0 ]);
            svg.append("g").attr("transform","translate(0,0)").call(d3.axisLeft(y));

            //Create Line
            const line = svg.append('g').append('path')
                .datum(SeasonsEPL)
                .attr('d',d3.line()
                .x(function(d) { return x(d.Season) })
                .y(function(d) { return y(d.Pts) }))
                .attr("stroke", function(d){ return myColor("Arsenal") }).style("stroke-width", 4).style("fill", "none") 

           

            // Update Teams .attr("class",function(d){return "dot" + d.Season})
           /*  function update(SelGroup) {
                const dataFilter = SeasonsEPL.map(function(d){return {Season: d.Season, Pts:d[SelGroup]} });
            
                line.datum(dataFilter).transition().duration(1000).attr("d", d3.line()
                        .x(function(d) { return x(+d.Season) })
                        .y(function(d) { return y(+d.Pts) }) )
                        .attr("stroke", function(d){ return myColor(Group) })
                };ÃŸ
            
            d3.select("#selectButton").on("change", function(event,d) {
                let selectedOption = d3.select(this).property("value");
                update(selectedOption)
            })      */
        


        });

    }
    function graph_two() {
        d3.select('body').select('#p1').text("Expected Goals vs Goals");
        d3.select('body').select('#p2').text("The graph below:");
        d3.select("svg").remove(); //Makes sure to remove what's previously shown and show new graph SOURCE: https://stackoverflow.com/questions/10784018/how-can-i-remove-or-replace-svg-content
        d3.select("#selectButton").selectAll('option').remove();

        
    }
    function graph_three() {
        d3.select('body').select('#p1').text("Expected Assists vs Assists");
        d3.select('body').select('#p2').text("The graph below:");
        d3.select("svg").remove();
        d3.select("#selectButton").selectAll('option').remove();

        
    }
    
    

</script>
